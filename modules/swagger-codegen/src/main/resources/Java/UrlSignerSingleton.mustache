package {{invokerPackage}};

import com.mendix.cloud.urlsign.URLSigner;

import java.io.File;
import java.security.PrivateKey;

public class UrlSignerSingleton {
    private static URLSigner instance = null;
    private static String privateKey = null;

    public static final int DEFAULT_EXPIRE_TTL = 120;

    //private UrlSignerSingleton() {}

    public static URLSigner getInstance() {
        if(instance == null) {
            try {
                if (privateKey == null) {
                    instance = new URLSigner(new File(UrlSignerSingleton.class.getResource("/id_rsa").getFile()));
                } else {
                    instance = new URLSigner(privateKey);
                }
            } catch (Exception e) {
                throw new RuntimeException("An exception occurred while instantiating URLSigner", e);
            }
        }

        return instance;
    }

    public static void setPrivateKey(String privateKey) {
        UrlSignerSingleton.privateKey = privateKey;
    }
}
